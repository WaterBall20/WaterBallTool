# 水球工具
**WaterBallTool**

*更新世界：2025年10月10日*
此文档未完成

## 简要说明
    这是我开发的一个我给我自己用的工具，同时用于练习编程，和练习逻辑思考。

## 运行环境
- .Net 8.0

## 主要功能
- 文件搜索器
- 水球文件包操作

## 主要功能说明和使用方法
此程序属于**控制台程序**，使用**启动参数**来运行。

### 文件搜索器(ff)
这是一个简单的文件搜索器，保存为Json文件。
- 命令：

~~~cmd
WaterBallTool.exe ff <文件夹路径> <保存文件路径> [可选参数]
~~~
- 可选参数

|参数|类型|默认值|用途|
|-|-|-|-|
|--f|布尔值|false|格式化输出Json，方便查看|

### 水球包文件操作(wbfp)
这是用于操作我自己定义的包文件，**不是**普通的**压缩文件**，使用*常见的解压缩程序* **无法**打开。
#### 打包(m)
- 命令
~~~cmd
WaterBallTool.exe wbfp m <文件夹路径> <保存文件路径> <包名称> [可选参数]
~~~
注：**包名称**是可省略的值
- 可选参数

|参数|类型|默认值|用途|
|-|-|-|-|
|--oh|布尔值|false|存储哈希值，之后可用于哈希验证|
|--os|布尔值|true|列表数据分离，即把包文件索引Json数据单独写出，后面以支持更多功能|
|--ow|布尔值|false|（由于目前未开发完成）|写入优化。**警告**:此功能未开发完成，加此参数会导致不可用。|

#### 分离(s)
- 命令
~~~cmd
WaterBallTool.exe wbfp m <包文件路径> <保存文件夹路径> [可选参数]
~~~
注：**包名称**是可省略的值
- 可选参数

|参数|类型|默认值|用途|
|-|-|-|-|
|--oh|布尔值|false|写出的同时进行哈希验证，需要包文件存储哈希值|
|--of|布尔值|false|不询问直接覆盖文件|
|--ow|布尔值|true|写出的写入优化|
### 工具(t)
#### 哈希验证(hv)
进行自我哈希验证，需要包存储哈希值。
- 命令
~~~cmd
WaterBallTool.exe wbfp t hv <包路径>
~~~
#### 显示包文件信息
显示包文件信息，支持显示文件列表。
- 命令
~~~cmd
WaterBallTool.exe wbfp t fpi <包路径>
~~~

## 目前支持

#### 1.文件搜索
- 支持多线程搜索(**改善**固态硬盘搜索速度，但对**机械硬盘**反而可能会**减慢** ，因为可能会导致磁头来回摆动，增加额外的延时。
- 流式转换并保存为Json文件
### 2.水球包文件操作
    支持打包、分离、哈希验证（若包文件保存哈希值）和简单的文件预览
#### (1)打包
- 支持分离元数据到Json文件
- 支持边写边计算哈希值
#### (2)分离
- 分离支持写入优化（少量的延长固态硬盘寿命）


## 计划支持
### 2.水球包文件操作
#### (1)打包
- 支持写入优化，能够增量更新，少量的延长固态硬盘寿命。
- 支持多线程读取源文件，加速碎片文件的读取速度。
- 支持压缩文件
- 支持数据加密
- 提供一个虚拟文件接口，实现直接更新数据。
#### (@)分离
- 支持多线程写出，加速碎片文件的写出速度。
- 支持写出部分文件
- 支持解压数据
- 支持数据解密
- 提供一个虚拟文件接口，在不分离的情况下直接读取数据。
